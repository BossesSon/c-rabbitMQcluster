# RabbitMQ Configuration for 3-Node Cluster
# This configuration enables clustering with peer discovery and management interface

# Enable management plugin
management.tcp.port = 15672
management.tcp.ip = 0.0.0.0

# AMQP listeners
listeners.tcp.default = 5672

# Enable clustering
cluster_formation.peer_discovery_backend = classic_config

# Define cluster nodes (all three nodes)
cluster_formation.classic_config.nodes.1 = rabbit@rmq1
cluster_formation.classic_config.nodes.2 = rabbit@rmq2  
cluster_formation.classic_config.nodes.3 = rabbit@rmq3

# Clustering ports
cluster_formation.node_cleanup.interval = 10
cluster_formation.node_cleanup.only_log_warning = false

# Memory and disk thresholds
vm_memory_high_watermark.relative = 0.8
disk_free_limit.absolute = 5GB

# Enable log collection
log.console = true
log.console.level = info
log.file = false

# Heartbeat settings for better cluster stability
heartbeat = 60